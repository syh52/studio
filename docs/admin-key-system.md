# 管理员密钥系统使用指南

## 🔐 概述

Lexicon 管理员密钥系统提供了完整的权限管理解决方案，保护批量上传、AI智能导入等高级功能。

## 🎯 系统特性

### 双层权限架构
- **超级管理员**: 拥有完全权限，可管理其他密钥
- **普通管理员**: 可访问上传和AI功能，但无密钥管理权限

### 安全机制
- SHA-256 密钥加密存储
- 24小时权限缓存
- 3次错误尝试限制
- 完整使用记录追踪

## 🔑 您的超级管理员密钥

```
LEXICON-SUPER-ADMIN-2024-9F8E7D6C5B4A3928
```

**⚠️ 重要提示**: 请妥善保管此密钥，它具有系统最高权限！

## 📋 功能权限一览

### 受保护的功能

#### 1. 批量上传功能 (`/upload`)
- **权限要求**: `canAccessUpload`
- **包含功能**:
  - AI智能导入
  - 对话批量上传
  - 词汇批量上传
  - Excel模板下载

#### 2. AI智能导入功能
- **权限要求**: `canAccessAI`
- **包含功能**:
  - 文本智能解析
  - 自动格式化
  - 批量数据导入

#### 3. 密钥管理功能 (`/admin/keys`)
- **权限要求**: `canManageKeys`
- **仅超级管理员可访问**
- **包含功能**:
  - 生成新密钥
  - 启用/禁用密钥
  - 查看使用统计
  - 导出密钥数据

## 🚀 使用流程

### 首次访问受保护功能

1. **触发验证**: 访问任何受保护功能时，系统会显示权限验证界面
2. **输入密钥**: 输入您的超级管理员密钥
3. **获得权限**: 验证成功后，权限缓存24小时

### 为他人创建管理员密钥

1. **访问密钥管理**: 使用顶部导航的"密钥管理"或用户菜单进入
2. **生成密钥**: 点击"生成密钥"按钮
3. **设置信息**: 填写密钥描述和生成数量
4. **复制密钥**: 新密钥生成后立即复制保存（不会再次显示）
5. **分发密钥**: 将密钥安全地发送给需要的用户

## 🛠️ 管理功能详解

### 密钥管理界面

#### 统计面板
- **总密钥数**: 显示所有创建的密钥总数
- **活跃密钥**: 显示当前可用的密钥数量
- **总使用次数**: 所有密钥的累计使用次数
- **最近活动**: 显示最近有使用记录的密钥数量

#### 密钥列表
- **描述管理**: 可编辑密钥用途描述
- **状态控制**: 启用/禁用特定密钥
- **使用统计**: 查看每个密钥的使用次数和最后使用时间

#### 使用统计
- **活动记录**: 查看密钥的详细使用历史
- **用户追踪**: 了解哪些用户在使用密钥

### 密钥生成功能

#### 单个密钥生成
- 适用于为特定用户创建密钥
- 可设置描述便于管理

#### 批量密钥生成
- 一次最多生成10个密钥
- 适用于团队或培训场景
- 自动编号便于分发

## 📊 权限级别说明

### 超级管理员权限
```typescript
{
  level: AdminLevel.SUPER_ADMIN,
  canManageKeys: true,    // 可管理密钥
  canAccessUpload: true,  // 可访问上传功能
  canAccessAI: true,      // 可访问AI功能
  canViewStatistics: true, // 可查看统计
  validUntil: 24小时后    // 24小时有效期
}
```

### 普通管理员权限
```typescript
{
  level: AdminLevel.REGULAR_ADMIN,
  canManageKeys: false,   // 不可管理密钥
  canAccessUpload: true,  // 可访问上传功能
  canAccessAI: true,      // 可访问AI功能
  canViewStatistics: false, // 不可查看统计
  validUntil: 24小时后     // 24小时有效期
}
```

## 🔍 识别超级管理员身份

### 界面标识
- 顶部导航显示"密钥管理"菜单
- 用户下拉菜单中显示"超级管理员"标识
- 用户下拉菜单包含"密钥管理"快捷入口

### 功能权限
- 可访问 `/admin/keys` 页面
- 可生成和管理所有密钥
- 可查看完整的使用统计

## 📈 最佳实践

### 密钥分发
1. **安全通道**: 通过安全的通信方式（如加密邮件）发送密钥
2. **及时告知**: 告知接收者密钥的用途和使用方法
3. **定期检查**: 定期查看密钥使用情况，及时发现异常

### 权限管理
1. **按需分配**: 只给需要的用户分配密钥
2. **及时回收**: 当用户不再需要权限时，及时禁用密钥
3. **记录管理**: 为每个密钥添加清晰的描述

### 安全维护
1. **定期检查**: 定期查看密钥使用统计
2. **异常监控**: 关注异常的使用模式
3. **权限审计**: 定期审查谁拥有什么权限

## 🚨 应急处理

### 密钥泄露
1. 立即禁用相关密钥
2. 生成新密钥给合法用户
3. 检查系统使用记录

### 权限异常
1. 检查密钥状态
2. 重新验证用户身份
3. 必要时重新生成密钥

### 系统维护
1. 导出密钥数据备份
2. 清理过期或无用密钥
3. 更新密钥描述信息

## 📞 技术支持

如遇到问题，请提供以下信息：
- 用户账号信息
- 具体错误信息
- 操作步骤描述
- 发生时间

---

**提醒**: 此系统确保了 Lexicon 高级功能的安全性，请合理使用管理权限！ 